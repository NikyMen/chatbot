Bot de WhatsApp Business con Vercel
Bot automatizado para responder mensajes de WhatsApp Business desplegado en Vercel.
ğŸ“‹ Requisitos Previos

Cuenta de Meta Business: https://business.facebook.com/
AplicaciÃ³n en Meta for Developers: https://developers.facebook.com/
Cuenta en Vercel: https://vercel.com/
Node.js instalado (v18 o superior)

ğŸš€ ConfiguraciÃ³n Paso a Paso
1. Configurar WhatsApp Business API

Ve a https://developers.facebook.com/
Crea una aplicaciÃ³n nueva o usa una existente
Agrega el producto "WhatsApp"
En la configuraciÃ³n de WhatsApp:

Copia tu Token de Acceso (WHATSAPP_TOKEN)
Copia tu Phone Number ID (PHONE_NUMBER_ID)
Agrega un nÃºmero de prueba



2. Crear Token de VerificaciÃ³n
Crea un token Ãºnico y seguro para verificar el webhook:
bash# Ejemplo de token (usa uno Ãºnico y seguro)
VERIFY_TOKEN=mi_token_secreto_12345
3. Desplegar en Vercel
OpciÃ³n A: Deploy con GitHub

Sube el cÃ³digo a GitHub
Ve a https://vercel.com/
Importa tu repositorio de GitHub
Configura las variables de entorno en Vercel:

VERIFY_TOKEN: tu token de verificaciÃ³n
WHATSAPP_TOKEN: token de acceso de WhatsApp
PHONE_NUMBER_ID: ID del nÃºmero de telÃ©fono



OpciÃ³n B: Deploy con CLI
bash# Instalar Vercel CLI
npm i -g vercel

# Iniciar sesiÃ³n
vercel login

# Desplegar
vercel

# Configurar variables de entorno
vercel env add VERIFY_TOKEN
vercel env add WHATSAPP_TOKEN
vercel env add PHONE_NUMBER_ID

# Deploy a producciÃ³n
vercel --prod
4. Configurar Webhook en Meta

Copia tu URL de Vercel: https://tu-proyecto.vercel.app/webhook
En Meta for Developers > WhatsApp > ConfiguraciÃ³n
En "Webhook", haz clic en "Configurar"
Pega tu URL del webhook
Pega tu VERIFY_TOKEN
Haz clic en "Verificar y guardar"
SuscrÃ­bete al campo "messages"

ğŸ“ Estructura del Proyecto
whatsapp-bot-vercel/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ webhook.js       # Endpoint principal del bot
â”œâ”€â”€ package.json         # Dependencias
â”œâ”€â”€ vercel.json         # ConfiguraciÃ³n de Vercel
â””â”€â”€ README.md           # Este archivo
ğŸ¤– Personalizar Respuestas
Edita la funciÃ³n generateResponse() en api/webhook.js:
javascriptfunction generateResponse(messageText) {
  const text = messageText?.toLowerCase() || '';
  
  // Agrega tus propias respuestas aquÃ­
  if (text.includes('tu_palabra_clave')) {
    return 'Tu respuesta personalizada';
  }
  
  return 'Respuesta por defecto';
}
ğŸ’¬ Comandos que Responde el Bot

Saludos: "hola", "buenos dÃ­as", "buenas tardes"
Precios: "precio", "costo", "cuanto"
Horarios: "horario", "abierto"
UbicaciÃ³n: "ubicaciÃ³n", "direcciÃ³n", "donde"
MenÃº: "ayuda", "menu", "opciones"

ğŸ” Testing
Para probar tu bot:

EnvÃ­a un mensaje de WhatsApp al nÃºmero configurado
El bot responderÃ¡ automÃ¡ticamente
Revisa los logs en Vercel Dashboard

ğŸ“Š Ver Logs
bash# Ver logs en tiempo real
vercel logs tu-proyecto.vercel.app --follow
ğŸ› ï¸ Troubleshooting
Error: Webhook no verifica

Verifica que VERIFY_TOKEN sea exactamente igual en Vercel y Meta
AsegÃºrate que la URL termina en /webhook

Error: No recibe mensajes

Verifica que estÃ©s suscrito al campo "messages" en Meta
Revisa los logs en Vercel para ver errores

Error: No envÃ­a mensajes

Verifica que WHATSAPP_TOKEN estÃ© correcto
AsegÃºrate que el token no haya expirado
Verifica PHONE_NUMBER_ID

ğŸš€ PrÃ³ximos Pasos

Agregar botones interactivos
Implementar respuestas con imÃ¡genes
Conectar con una base de datos
Agregar inteligencia artificial (Claude API)
Implementar sistema de tickets

ğŸ“ Notas

Los tokens de acceso de WhatsApp expiran cada 90 dÃ­as
El nÃºmero de prueba tiene limitaciones de mensajes
Para producciÃ³n, necesitas un nÃºmero verificado de WhatsApp Business

ğŸ†˜ Soporte
Para mÃ¡s informaciÃ³n:

WhatsApp Business API: https://developers.facebook.com/docs/whatsapp
Vercel Docs: https://vercel.com/docs
Meta for Developers: https://developers.facebook.com/
